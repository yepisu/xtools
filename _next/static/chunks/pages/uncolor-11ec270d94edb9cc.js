(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2892],{55343:function(e,t,n){"use strict";var l=n(64836);t.Z=void 0;var i=l(n(64938)),r=n(85893),s=(0,i.default)((0,r.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");t.Z=s},28171:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uncolor",function(){return n(49910)}])},3203:function(e,t,n){"use strict";var l=n(85893),i=n(5616),r=n(67294);t.Z=e=>{let t=(0,r.useCallback)(t=>{if(e.src){let t=/^data:[a-zA-Z0-9]+\/([a-zA-Z0-9]+)[^;]*;base64,/.exec(e.src);if(t&&t[1]){let n=document.createElement("a");n.style.display="none",n.href=e.src,n.download="保存图片."+t[1],document.body.appendChild(n),n.click()}}},[e.src]);return(0,l.jsxs)(i.Z,{sx:{width:"100%",padding:"20px",position:"relative",display:"inline-block",border:"black solid 1px",borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px",...e.sx},children:[e.src?(0,l.jsx)("img",{src:e.src,style:{width:"100%",height:"100%"}}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)(i.Z,{sx:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1",cursor:"pointer",color:"rgba(0,0,0,0)",fontSize:"14px",textAlign:"center",userSelect:"none",paddingTop:"20px","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.5)",color:e.src?"rgba(255,255,255,1)":""}},onClick:t,children:[" ","点击下载图片"," "]})]})}},43197:function(e,t,n){"use strict";var l=n(85893),i=n(70671),r=n(88613),s=n(47023),o=n(37375),a=n(55343),d=n(51233),c=n(5616),u=n(15861),h=n(25662),x=n(67294);t.Z=e=>{let{children:t,sx:n,fullScreen:p=!0}=e,{path:m}=(0,r.hI)(),[g]=x.useState(o.Z.find(e=>e.path===m));return(0,x.useEffect)(()=>{let e=e=>{if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="unset",e.style.inset="0",e.style.maxWidth="unset",e.style.padding="0",t&&(t.style.display="block"))}};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,l.jsxs)(d.Z,{sx:{px:"50px",py:2,overflow:"auto",flex:1,borderRadius:"8px",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(145,158,171,0.2), 0px 12px 24px -4px rgba(145,158,171,0.12)",...n},children:[(0,l.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(c.Z,{children:(0,l.jsx)(u.Z,{sx:{mb:"0px",fontWeight:600,color:i.Z2,fontSize:"20px"},gutterBottom:!0,variant:"subtitle1",component:"div",children:null==g?void 0:g.label})}),(0,l.jsx)(d.Z,{direction:"row",sx:{fontFamily:"Mono"},children:s.i.filter(e=>null==g?void 0:g.tags.includes(e.name)).map(e=>(0,l.jsx)(c.Z,{sx:{height:"24px",lineHeight:"24px",fontSize:"12px",background:"rgba(52,90,255,0.1)",color:"#345AFF",px:1,borderRadius:1,ml:1},children:e.label},e.name))})]}),(0,l.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",width:"100%",alignSelf:"stretch",mb:"24px"},children:[(0,l.jsx)(u.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",pl:"6px",color:"rgba(11,37,98,0.5)",background:"rgba(11,37,98,0.04)",borderRadius:1,lineHeight:"24px"},children:null==g?void 0:g.subTitle}),p?(0,l.jsx)(h.Z,{size:"small",onClick:()=>{let e=document.body;new Promise(t=>{(null==e?void 0:e.requestFullscreen)?t(e.requestFullscreen()):(null==e?void 0:e.mozRequestFullScreen)?t(null==e?void 0:e.mozRequestFullScreen()):(null==e?void 0:e.webkitRequestFullscreen)?t(null==e?void 0:e.webkitRequestFullscreen()):(null==e?void 0:e.msRequestFullscreen)&&t(null==e?void 0:e.msRequestFullscreen())}).then(()=>{let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="fixed",e.style.inset="0",e.style.maxWidth="100vw",e.style.background="#fff",e.style.padding="84px 14px 14px 14px",t&&(t.style.display="none"))})},sx:{borderRadius:"4px",height:"24px"},variant:"outlined",startIcon:(0,l.jsx)(a.Z,{}),children:"全屏"}):null]}),(0,l.jsx)(d.Z,{id:"fullscreen-element",sx:{gap:"18px",maxWidth:"1020px",fontFamily:"Mono",mx:"auto",flex:1,width:"100%"},children:t})]})}},49910:function(e,t,n){"use strict";n.r(t);var l=n(85893),i=n(3203),r=n(43197),s=n(5616),o=n(51233),a=n(25662),d=n(90948),c=n(67294);let u=(0,d.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),h=(0,d.ZP)("img")({maxHeight:"100%",maxWidth:"100%"}),x=(0,d.ZP)("span")({});t.default=()=>{let[e,t]=(0,c.useState)(""),[n,d]=(0,c.useState)(""),p=(0,c.useCallback)(e=>{let n=e.target.files||[];if(0==n.length)return;let l=new FileReader;l.onload=function(e){if(null==e.target)return;t(e.target.result);let n=e.target.result;if("string"!=typeof n)return;let l=new Image;l.onload=function(){let e=document.createElement("canvas"),t=e.getContext("2d");if(null==t)return;e.width=l.width,e.height=l.height,t.drawImage(l,0,0,l.width,l.height);let n=t.getImageData(0,0,l.width,l.height);for(let e=0;e<n.data.length;e+=4){let t=(n.data[e]+n.data[e+1]+n.data[e+2])/3;n.data[e]=n.data[e+1]=n.data[e+2]=t}console.log(n),t.putImageData(n,0,0);let i=e.toDataURL();console.log("Black and white image:",i),d(i)},l.src=n},l.readAsDataURL(n[0])},[]);return(0,l.jsx)(r.Z,{children:(0,l.jsx)(s.Z,{sx:{width:"100%",typography:"body1"},children:(0,l.jsxs)(o.Z,{spacing:1,sx:{color:"#FF1844"},children:[(0,l.jsxs)(a.Z,{component:"label",variant:"outlined",sx:{borderRadius:"3px",height:"179px"},children:[e?(0,l.jsx)(x,{}):(0,l.jsx)(x,{children:"选择图片"}),(0,l.jsx)(h,{src:e}),(0,l.jsx)(u,{type:"file",onChange:p})]}),(0,l.jsx)(i.Z,{src:n})]})})})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=28171)}),_N_E=e.O()}]);