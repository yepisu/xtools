(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2368],{55343:function(e,t,n){"use strict";var i=n(64836);t.Z=void 0;var r=i(n(64938)),o=n(85893),l=(0,r.default)((0,o.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");t.Z=l},62705:function(e,t,n){var i=n(55639).Symbol;e.exports=i},44239:function(e,t,n){var i=n(62705),r=n(89607),o=n(2333),l=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):o(e)}},27561:function(e,t,n){var i=n(67990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},31957:function(e,t,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},89607:function(e,t,n){var i=n(62705),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,u=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,u),n=e[u];try{e[u]=void 0;var i=!0}catch(e){}var r=l.call(e);return i&&(t?e[u]=n:delete e[u]),r}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,n){var i=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var i=n(13218),r=n(7771),o=n(14841),l=Math.max,u=Math.min;e.exports=function(e,t,n){var a,c,s,d,f,A,p=0,h=!1,x=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var n=a,i=c;return a=c=void 0,p=t,d=e.apply(i,n)}function v(e){var n=e-A,i=e-p;return void 0===A||n>=t||n<0||x&&i>=s}function w(){var e,n,i,o=r();if(v(o))return b(o);f=setTimeout(w,(e=o-A,n=o-p,i=t-e,x?u(i,s-n):i))}function b(e){return(f=void 0,g&&a)?m(e):(a=c=void 0,d)}function y(){var e,n=r(),i=v(n);if(a=arguments,c=this,A=n,i){if(void 0===f)return p=e=A,f=setTimeout(w,t),h?m(e):d;if(x)return clearTimeout(f),f=setTimeout(w,t),m(A)}return void 0===f&&(f=setTimeout(w,t)),d}return t=o(t)||0,i(n)&&(h=!!n.leading,s=(x="maxWait"in n)?l(o(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),y.cancel=function(){void 0!==f&&clearTimeout(f),p=0,a=A=c=f=void 0},y.flush=function(){return void 0===f?d:b(r())},y}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var i=n(44239),r=n(37005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},7771:function(e,t,n){var i=n(55639);e.exports=function(){return i.Date.now()}},23493:function(e,t,n){var i=n(23279),r=n(13218);e.exports=function(e,t,n){var o=!0,l=!0;if("function"!=typeof e)throw TypeError("Expected a function");return r(n)&&(o="leading"in n?!!n.leading:o,l="trailing"in n?!!n.trailing:l),i(e,t,{leading:o,maxWait:t,trailing:l})}},14841:function(e,t,n){var i=n(27561),r=n(13218),o=n(33448),l=0/0,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||c.test(e)?s(e.slice(2),n?2:8):u.test(e)?l:+e}},9671:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pixel_img",function(){return n(32782)}])},46866:function(e,t){"use strict";t.Z={src:"/tools/_next/static/media/pixel-img.a2f441f6.jpeg",height:1e3,width:1e3,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAAAwEBAQAAAAAAAAAAAAAAAAAAAAP/2gAMAwEAAhADEAAAALCz/8QAHRAAAgEEAwAAAAAAAAAAAAAAAQIEAAMREiNBUf/aAAgBAQABPwBJHCku6GXK6oAhUFCM6n1uw1f/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwCP/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:8}},43197:function(e,t,n){"use strict";var i=n(85893),r=n(70671),o=n(88613),l=n(47023),u=n(37375),a=n(55343),c=n(51233),s=n(5616),d=n(15861),f=n(25662),A=n(67294);t.Z=e=>{let{children:t,sx:n,fullScreen:p=!0}=e,{path:h}=(0,o.hI)(),[x]=A.useState(u.Z.find(e=>e.path===h));return(0,A.useEffect)(()=>{let e=e=>{if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="unset",e.style.inset="0",e.style.maxWidth="unset",e.style.padding="0",t&&(t.style.display="block"))}};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,i.jsxs)(c.Z,{sx:{px:"50px",py:2,overflow:"auto",flex:1,borderRadius:"8px",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(145,158,171,0.2), 0px 12px 24px -4px rgba(145,158,171,0.12)",...n},children:[(0,i.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(s.Z,{children:(0,i.jsx)(d.Z,{sx:{mb:"0px",fontWeight:600,color:r.Z2,fontSize:"20px"},gutterBottom:!0,variant:"subtitle1",component:"div",children:null==x?void 0:x.label})}),(0,i.jsx)(c.Z,{direction:"row",sx:{fontFamily:"Mono"},children:l.i.filter(e=>null==x?void 0:x.tags.includes(e.name)).map(e=>(0,i.jsx)(s.Z,{sx:{height:"24px",lineHeight:"24px",fontSize:"12px",background:"rgba(52,90,255,0.1)",color:"#345AFF",px:1,borderRadius:1,ml:1},children:e.label},e.name))})]}),(0,i.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",width:"100%",alignSelf:"stretch",mb:"24px"},children:[(0,i.jsx)(d.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",pl:"6px",color:"rgba(11,37,98,0.5)",background:"rgba(11,37,98,0.04)",borderRadius:1,lineHeight:"24px"},children:null==x?void 0:x.subTitle}),p?(0,i.jsx)(f.Z,{size:"small",onClick:()=>{let e=document.body;new Promise(t=>{(null==e?void 0:e.requestFullscreen)?t(e.requestFullscreen()):(null==e?void 0:e.mozRequestFullScreen)?t(null==e?void 0:e.mozRequestFullScreen()):(null==e?void 0:e.webkitRequestFullscreen)?t(null==e?void 0:e.webkitRequestFullscreen()):(null==e?void 0:e.msRequestFullscreen)&&t(null==e?void 0:e.msRequestFullscreen())}).then(()=>{let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="fixed",e.style.inset="0",e.style.maxWidth="100vw",e.style.background="#fff",e.style.padding="84px 14px 14px 14px",t&&(t.style.display="none"))})},sx:{borderRadius:"4px",height:"24px"},variant:"outlined",startIcon:(0,i.jsx)(a.Z,{}),children:"全屏"}):null]}),(0,i.jsx)(c.Z,{id:"fullscreen-element",sx:{gap:"18px",maxWidth:"1020px",fontFamily:"Mono",mx:"auto",flex:1,width:"100%"},children:t})]})}},32782:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(85893),r=n(43197),o=n(5616),l=n(51233),u=n(61903),a=n(25662),c=n(97582),s=n(67294),d=n(23493),f=n.n(d),A=function(e){var t=(0,s.useRef)(e);return t.current=e,t},p=n(92770),h=n(31663),x=function(e){h.Z&&!(0,p.mf)(e)&&console.error("useUnmount expected parameter is a function, got ".concat(typeof e));var t=A(e);(0,s.useEffect)(function(){return function(){t.current()}},[])},g=function(e,t){h.Z&&!(0,p.mf)(e)&&console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e));var n,i=A(e),r=null!==(n=null==t?void 0:t.wait)&&void 0!==n?n:1e3,o=(0,s.useMemo)(function(){return f()(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.current.apply(i,(0,c.ev)([],(0,c.CR)(e),!1))},r,t)},[]);return x(function(){o.cancel()}),{run:o,cancel:o.cancel,flush:o.flush}},m=function(e,t){var n=(0,c.CR)((0,s.useState)(e),2),i=n[0],r=n[1],o=g(function(){r(e)},t).run;return(0,s.useEffect)(function(){o()},[e]),i},v=n(46866),w=()=>{let[e,t]=(0,s.useState)(10),[n,c]=(0,s.useState)(""),[d,f]=(0,s.useState)(),[A,p]=(0,s.useState)(1),h=m(e,{wait:500}),x=()=>{let t=document.getElementById("pixelCanvas"),n=t.getContext("2d",{willReadFrequently:!0}),i=null==n?void 0:n.getImageData(0,0,t.width,t.height),r={w:0,h:0};for(let n=0;n<t.height;n+=e)for(let o=0;o<t.width;o+=e){r={w:o+e>t.width?t.width%e:e,h:n+e>t.height?t.height%e:e};let l=(o+n*t.width)*4,u=w(l,r,t,i),a=w(l+1,r,t,i),c=w(l+2,r,t,i);for(let e=0;e<r.h;e++)for(let n=0;n<r.w;n++)i.data[l+4*n+t.width*e*4]=u,i.data[l+1+4*n+t.width*e*4]=a,i.data[l+2+4*n+t.width*e*4]=c}null==n||n.putImageData(i,0,0)},g=async e=>{let t=document.getElementById("pixelCanvas"),n=t.getContext("2d",{willReadFrequently:!0}),i=new Image,r=new FileReader;r.onload=e=>{if(e.target){let r=e.target.result;i.src=r,c(r),i.onload=()=>{let{width:e,height:r}=i,o=e/r;p(o),t.width=e>434?434:e,t.height=e>434?434/o:r,null==n||n.drawImage(i,0,0,t.width,t.height),x()}}},r.readAsDataURL(e)},w=(e,t,n,i)=>{let r=0;for(let o=0;o<t.h;o++)for(let l=0;l<t.w;l++)i.data[e+4*l+n.width*o*4]&&(r+=i.data[e+4*l+n.width*o*4]);return r/(t.w*t.h)};return(0,s.useEffect)(()=>{d&&e>0&&g(d)},[h]),(0,s.useEffect)(()=>{fetch(v.Z.src).then(e=>e.blob()).then(e=>{c(URL.createObjectURL(e));let t=new File([e],"pixel.jpeg",{type:"image/jpeg"});f(t),g(t)})},[]),(0,i.jsx)(r.Z,{children:(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(o.Z,{sx:{color:"#999",fontSize:"14px"},children:"像素值"}),(0,i.jsx)(u.Z,{sx:{width:"100px",input:{p:"6px 10px"},"input::placeholder":{fontSize:"14px"}},type:"number",size:"small",variant:"outlined",value:e,onChange:e=>{let n=Number(e.target.value);n>30?t(30):n<1?t(1):t(0|n)}})]}),(0,i.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(a.Z,{sx:{borderRadius:"4px",mb:2},size:"small",variant:"outlined",onClick:()=>{let e=document.getElementById("fileInput");null==e||e.click()},children:"上传图片"}),(0,i.jsx)(a.Z,{sx:{borderRadius:"4px",mb:2},size:"small",variant:"contained",disabled:!n,onClick:()=>{let t=document.getElementById("pixelCanvas"),n=document.createElement("a");n.download="pixel-".concat(e,".")+(null==d?void 0:d.name.split(".")[1]),n.href=t.toDataURL(),n.click()},children:"下载"})]})]}),(0,i.jsx)(o.Z,{component:"input",id:"fileInput",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(g(n),f(n))}}),(0,i.jsxs)(l.Z,{direction:"row",sx:{mt:2},children:[(0,i.jsx)(o.Z,{sx:{width:"434px"},children:!!n&&(0,i.jsx)(o.Z,{width:434,height:434/A|0,component:"img",src:n})}),(0,i.jsx)(o.Z,{width:434,height:434/A|0,children:(0,i.jsx)("canvas",{id:"pixelCanvas"})})]})]})})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=9671)}),_N_E=e.O()}]);