(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6044],{21866:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sqlite",function(){return l(91136)}])},31831:function(e,n,l){"use strict";var t=l(85893),o=l(67294),i=l(95982),r=l(13029),s=l(46901),u=l(20745),c=l(2734);let d=o.forwardRef(function(e,n){return(0,t.jsx)(s.Z,{elevation:6,ref:n,variant:"filled",...e})});function a(e){var n;let l=(0,c.Z)(),[s,u]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{setTimeout(()=>{u(!1)},2e3)},[]),(0,t.jsx)(r.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:s,sx:{zIndex:l.zIndex.snackbar+100},children:(0,t.jsx)(d,{sx:{borderRadius:"0","&.MuiAlert-filledSuccess":{backgroundColor:i.T$}},icon:!1,color:null==e?void 0:e.color,children:null!==(n=null==e?void 0:e.content)&&void 0!==n?n:""})},"top-center-warning")}function h(e){let n=document.createElement("div");document.body.appendChild(n),n.id="warning-window",n.style.zIndex="-2",(0,u.createRoot)(n).render((0,t.jsx)(a,{...e})),setTimeout(()=>{n.remove()},3e3)}n.Z={success:e=>h({color:"success",content:e}),warning:e=>h({color:"warning",content:e}),error:e=>h({color:"error",content:e})}},43197:function(e,n,l){"use strict";var t=l(85893),o=l(70671),i=l(88613),r=l(47023),s=l(37375),u=l(55343),c=l(51233),d=l(5616),a=l(15861),h=l(25662),x=l(67294);n.Z=e=>{let{children:n,sx:l,fullScreen:m=!0}=e,{path:p}=(0,i.hI)(),[g]=x.useState(s.Z.find(e=>e.path===p));return(0,x.useEffect)(()=>{let e=e=>{if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){let e=document.getElementById("fullscreen-element"),n=document.getElementById("rivers-header");e&&(e.style.position="unset",e.style.inset="0",e.style.maxWidth="unset",e.style.padding="0",n&&(n.style.display="block"))}};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,t.jsxs)(c.Z,{sx:{px:"50px",py:2,overflow:"auto",flex:1,borderRadius:"8px",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(145,158,171,0.2), 0px 12px 24px -4px rgba(145,158,171,0.12)",...l},children:[(0,t.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",children:[(0,t.jsx)(d.Z,{children:(0,t.jsx)(a.Z,{sx:{mb:"0px",fontWeight:600,color:o.Z2,fontSize:"20px"},gutterBottom:!0,variant:"subtitle1",component:"div",children:null==g?void 0:g.label})}),(0,t.jsx)(c.Z,{direction:"row",sx:{fontFamily:"Mono"},children:r.i.filter(e=>null==g?void 0:g.tags.includes(e.name)).map(e=>(0,t.jsx)(d.Z,{sx:{height:"24px",lineHeight:"24px",fontSize:"12px",background:"rgba(52,90,255,0.1)",color:"#345AFF",px:1,borderRadius:1,ml:1},children:e.label},e.name))})]}),(0,t.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",width:"100%",alignSelf:"stretch",mb:"24px"},children:[(0,t.jsx)(a.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",pl:"6px",color:"rgba(11,37,98,0.5)",background:"rgba(11,37,98,0.04)",borderRadius:1,lineHeight:"24px"},children:null==g?void 0:g.subTitle}),m?(0,t.jsx)(h.Z,{size:"small",onClick:()=>{let e=document.body;new Promise(n=>{(null==e?void 0:e.requestFullscreen)?n(e.requestFullscreen()):(null==e?void 0:e.mozRequestFullScreen)?n(null==e?void 0:e.mozRequestFullScreen()):(null==e?void 0:e.webkitRequestFullscreen)?n(null==e?void 0:e.webkitRequestFullscreen()):(null==e?void 0:e.msRequestFullscreen)&&n(null==e?void 0:e.msRequestFullscreen())}).then(()=>{let e=document.getElementById("fullscreen-element"),n=document.getElementById("rivers-header");e&&(e.style.position="fixed",e.style.inset="0",e.style.maxWidth="100vw",e.style.background="#fff",e.style.padding="84px 14px 14px 14px",n&&(n.style.display="none"))})},sx:{borderRadius:"4px",height:"24px"},variant:"outlined",startIcon:(0,t.jsx)(u.Z,{}),children:"全屏"}):null]}),(0,t.jsx)(c.Z,{id:"fullscreen-element",sx:{gap:"18px",maxWidth:"1020px",fontFamily:"Mono",mx:"auto",flex:1,width:"100%"},children:n})]})}},91136:function(e,n,l){"use strict";l.r(n);var t=l(85893),o=l(43197),i=l(5616),r=l(51233),s=l(25662),u=l(40044),c=l(67294),d=l(90948),a=l(26657),h=l.n(a),x=l(52900),m=l(45670),p=l(66568),g=l(55050),f=l(82171),v=l(39142),b=l(74855),w=l(31831);let y=(0,d.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});n.default=()=>{let[e,n]=(0,c.useState)(),[l,d]=(0,c.useState)([]),[a,j]=(0,c.useState)(),[F,Z]=(0,c.useState)([]),[S,k]=(0,c.useState)([]),[C,E]=(0,c.useState)(0),[B,R]=(0,c.useState)([]),_=(0,c.useCallback)(e=>{h()({locateFile:()=>"./wasm/sqlite.wasm"}).then(n=>{console.log("then",e.byteLength);let l=new n.Database(new Uint8Array(e));j(l),l&&(d(["sqlite_master",...l.exec("select name from sqlite_master where type = 'table';")[0].values.map(e=>e[0])]),E(0),console.log("db loaded"))}).catch(e=>{console.log("catch",e)})},[]),q=(0,c.useCallback)(e=>{let l=e.target.files||[];if(0==l.length)return;let t=new FileReader;t.onload=function(e){null!==e.target&&_(e.target.result)},n(l[0].name),t.readAsArrayBuffer(l[0])},[]),z=(0,c.useCallback)(()=>{w.Z.success("已复制到剪切板")},[]),I=(0,c.useCallback)(e=>{let{columnIndex:n,rowIndex:l,style:o}=e;return(0,t.jsx)(b.CopyToClipboard,{text:S[l][n]?S[l][n]:"",onCopy:z,children:(0,t.jsx)(i.Z,{sx:{fontWeight:0===l?"600":"400",color:0===l?"#F6F7F9":"",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",padding:"6px  6px",fontFamily:"Mono",backgroundColor:0===l?"#ABB2BF":l%2==0?"#21252B":"#282C34","&:hover":0===l?{}:{backgroundColor:"#323842",fontWeight:"600",color:"#F6F7F9",cursor:"pointer"},...o},children:S[l][n]?S[l][n]:"-"})})},[S]);return(0,t.jsx)(o.Z,{children:(0,t.jsxs)(r.Z,{spacing:1,sx:{height:"100%"},children:[(0,t.jsxs)(s.Z,{startIcon:(0,t.jsx)(x.Z,{}),component:"label",variant:"outlined",sx:{borderRadius:"4px",width:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textTransform:"none"},children:[e?"已加载文件 - "+e:"选择 Sqlite 文件",(0,t.jsx)(y,{type:"file",onChange:q})]}),l.length>0?(0,t.jsx)(i.Z,{sx:{height:"100%",border:"solid 1px #ABB2BF",borderRadius:"4px",padding:0},children:(0,t.jsxs)(m.ZP,{value:C.toString(),children:[(0,t.jsx)(i.Z,{sx:{borderBottom:1,borderColor:"#ABB2BF"},children:(0,t.jsx)(p.Z,{onChange:(e,n)=>{console.log("change",n);let t=null==a?void 0:a.exec("select * from ".concat(l[n]))[0];if(t){let e=Array(null==t?void 0:t.columns.length).fill(0);for(let n=0;(null==t?void 0:t.columns)&&n<(null==t?void 0:t.columns.length);n++){let l=0;for(let e=0;(null==t?void 0:t.values)&&e<(null==t?void 0:t.values.length);e++)if(t.values[e][n]){var o;l+=((null===(o=t.values[e][n])||void 0===o?void 0:o.toString())||"").length}(l=(null==t?void 0:t.values.length)===0?null==t?void 0:t.columns[n].length:Math.ceil(l/(null==t?void 0:t.values.length)))<(null==t?void 0:t.columns[n].length)&&(l=null==t?void 0:t.columns[n].length),(l=12*l+20)<32?l=32:l>800&&(l=800),e[n]=l}R(e),Z(null==t?void 0:t.columns),k([null==t?void 0:t.columns,...null==t?void 0:t.values]),E(n)}},children:null==l?void 0:l.map((e,n)=>(0,t.jsx)(u.Z,{label:e,value:n.toString(),sx:{textTransform:"none",fontFamily:"Mono"}},n))})}),null==l?void 0:l.map((e,n)=>(0,t.jsx)(g.Z,{value:n.toString(),sx:{padding:0,height:"100%",backgroundColor:"#21252B",fontSize:"12px",color:"#ABB2BF"},children:(0,t.jsx)(v.ZP,{children:e=>(0,t.jsx)(f.cd,{columnCount:F.length,columnWidth:e=>B[e],height:e.height,rowCount:S.length,rowHeight:()=>32,width:e.width,children:I})})},n))]})}):(0,t.jsx)(t.Fragment,{})]})})}},70803:function(){}},function(e){e.O(0,[3714,1876,9912,9681,5688,5098,9774,2888,179],function(){return e(e.s=21866)}),_N_E=e.O()}]);