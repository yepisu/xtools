(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3866],{62099:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generate_qrcode",function(){return n(91943)}])},79163:function(e,t,n){"use strict";var i=n(85893),l=n(67294),r=n(11703),o=n(40044);t.Z=e=>{let{list:t,defatValue:n,onChange:a,change:s,sx:d,value:c}=e,[u,x]=(0,l.useState)(c||n||t[0].value);return(0,l.useEffect)(()=>{c&&x(c)},[c]),(0,i.jsx)(r.Z,{value:u,onChange:s?(e,t)=>s(t):(e,t)=>{null!==t&&(x(t),null==a||a(t))},sx:{p:"5px",border:"1px solid",borderColor:"divider",minHeight:36,height:36,backgroundColor:"background.paper",borderRadius:"4px",".MuiTabs-indicator":{top:0,bottom:0,height:"auto",borderRadius:"4px"},...d},children:t.map(e=>(0,i.jsx)(o.Z,{sx:{zIndex:1,p:"4px 12px",minHeight:0,width:"calc(100% / ".concat(t.length,")"),fontSize:"12px","&.Mui-selected":{color:"#fff"}},value:e.value,label:e.label,disabled:e.disabled},e.value))})}},43197:function(e,t,n){"use strict";var i=n(85893),l=n(70671),r=n(88613),o=n(47023),a=n(37375),s=n(55343),d=n(51233),c=n(5616),u=n(15861),x=n(25662),h=n(67294);t.Z=e=>{let{children:t,sx:n,fullScreen:p=!0}=e,{path:g}=(0,r.hI)(),[f]=h.useState(a.Z.find(e=>e.path===g));return(0,h.useEffect)(()=>{let e=e=>{if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="unset",e.style.inset="0",e.style.maxWidth="unset",e.style.padding="0",t&&(t.style.display="block"))}};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,i.jsxs)(d.Z,{sx:{px:"50px",py:2,overflow:"auto",flex:1,borderRadius:"8px",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(145,158,171,0.2), 0px 12px 24px -4px rgba(145,158,171,0.12)",...n},children:[(0,i.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(c.Z,{children:(0,i.jsx)(u.Z,{sx:{mb:"0px",fontWeight:600,color:l.Z2,fontSize:"20px"},gutterBottom:!0,variant:"subtitle1",component:"div",children:null==f?void 0:f.label})}),(0,i.jsx)(d.Z,{direction:"row",sx:{fontFamily:"Mono"},children:o.i.filter(e=>null==f?void 0:f.tags.includes(e.name)).map(e=>(0,i.jsx)(c.Z,{sx:{height:"24px",lineHeight:"24px",fontSize:"12px",background:"rgba(52,90,255,0.1)",color:"#345AFF",px:1,borderRadius:1,ml:1},children:e.label},e.name))})]}),(0,i.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",width:"100%",alignSelf:"stretch",mb:"24px"},children:[(0,i.jsx)(u.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",pl:"6px",color:"rgba(11,37,98,0.5)",background:"rgba(11,37,98,0.04)",borderRadius:1,lineHeight:"24px"},children:null==f?void 0:f.subTitle}),p?(0,i.jsx)(x.Z,{size:"small",onClick:()=>{let e=document.body;new Promise(t=>{(null==e?void 0:e.requestFullscreen)?t(e.requestFullscreen()):(null==e?void 0:e.mozRequestFullScreen)?t(null==e?void 0:e.mozRequestFullScreen()):(null==e?void 0:e.webkitRequestFullscreen)?t(null==e?void 0:e.webkitRequestFullscreen()):(null==e?void 0:e.msRequestFullscreen)&&t(null==e?void 0:e.msRequestFullscreen())}).then(()=>{let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="fixed",e.style.inset="0",e.style.maxWidth="100vw",e.style.background="#fff",e.style.padding="84px 14px 14px 14px",t&&(t.style.display="none"))})},sx:{borderRadius:"4px",height:"24px"},variant:"outlined",startIcon:(0,i.jsx)(s.Z,{}),children:"全屏"}):null]}),(0,i.jsx)(d.Z,{id:"fullscreen-element",sx:{gap:"18px",maxWidth:"1020px",fontFamily:"Mono",mx:"auto",flex:1,width:"100%"},children:t})]})}},91943:function(e,t,n){"use strict";n.r(t);var i=n(85893),l=n(79163),r=n(43197),o=n(51648),a=n(51233),s=n(5616),d=n(57709),c=n(61903),u=n(25662),x=n(73575),h=n(23599),p=n(92592),g=n(67004),f=n(67294);let m=[{label:"文本",value:"text"},{label:"网址",value:"url"}],v={L:"7%",M:"15%",Q:"25%",H:"30%",low:"7%",medium:"15%",quartile:"25%",high:"30%"},b=[{label:"7%",value:"L"},{label:"15%",value:"M"},{label:"25%",value:"Q"},{label:"30%",value:"H"}],w=[{label:"无边距",value:0},{label:"1 个色块",value:1},{label:"2 个色块",value:2},{label:"3 个色块",value:3},{label:"4 个色块",value:4}];t.default=()=>{let[e,t]=(0,f.useState)(m[0].value),[n,Z]=(0,f.useState)(""),[j,y]=(0,f.useState)(),[S,C]=(0,f.useState)("#ffffff"),[I,E]=(0,f.useState)(),[z,k]=(0,f.useState)("#000000"),[F,R]=(0,f.useState)(),[L,q]=(0,f.useState)(),[M,_]=(0,f.useState)(""),[B,P]=(0,f.useState)(""),[H,W]=(0,f.useState)(0),[D,N]=(0,f.useState)({errorCorrectionLevel:"H",margin:2,width:400}),T=e=>{let t=document.getElementById(e);null==t||t.click()},U=(e,t)=>{let n=e.target.files[0],i=new Image,l=document.createElement("canvas");i.src=URL.createObjectURL(n),i.onload=()=>{if("logoimg"===t){R(i);return}l.width=D.width,l.height=D.width;let e=l.getContext("2d");null==e||e.drawImage(i,0,0,D.width,D.width);let n=null==e?void 0:e.getImageData(0,0,D.width,D.width);"bgimg"===t?(C("#ffffff"),y(n)):(k("#000000"),E(n))}},A=()=>{Z(""),q(void 0),R(void 0),E(void 0),y(void 0),k("#000000"),C("#ffffff"),N({errorCorrectionLevel:"H",margin:2,width:400})},O=()=>{A(),setTimeout(()=>{A(),_(""),P(""),document.getElementById("qrcode").getContext("2d",{willReadFrequently:!0}).clearRect(0,0,D.width,D.width)},0)};return(0,f.useEffect)(()=>{if(L){let e=L.data,t=new ImageData(new Uint8ClampedArray(e),D.width,D.width),n=t.data,i=document.getElementById("qrcode"),l=i.getContext("2d",{willReadFrequently:!0});if(S){for(let t=0;t<n.length;t+=4)if(t%4==0&&255===e[t]&&255===e[t+1]&&255===e[t+2]&&255===e[t+3]){let e=(0,o.o)(S);n[t]=e[0],n[t+1]=e[1],n[t+2]=e[2],n[t+3]=255}}if(z){for(let t=0;t<n.length;t+=4)if(t%4==0&&0===e[t]&&0===e[t+1]&&0===e[t+2]&&255===e[t+3]){let e=(0,o.o)(z);n[t]=e[0],n[t+1]=e[1],n[t+2]=e[2],n[t+3]=255}}if(j){let t=j.data;for(let i=0;i<n.length;i+=4)i%4==0&&255===e[i]&&255===e[i+1]&&255===e[i+2]&&255===e[i+3]&&(n[i]=t[i],n[i+1]=t[i+1],n[i+2]=t[i+2],n[i+3]=t[i+3])}if(I){let t=I.data;for(let i=0;i<n.length;i+=4)i%4==0&&0===e[i]&&0===e[i+1]&&0===e[i+2]&&255===e[i+3]&&(n[i]=t[i],n[i+1]=t[i+1],n[i+2]=t[i+2],n[i+3]=t[i+3])}l.putImageData(t,0,0),F&&(l.beginPath(),l.arc(D.width/2,D.width/2,D.width/8+4|0,0,2*Math.PI,!1),l.fillStyle="#ffffff",l.fill(),l.clip(),l.closePath(),l.beginPath(),l.arc(D.width/2,D.width/2,D.width/8|0,0,2*Math.PI,!1),l.fill(),l.clip(),l.closePath(),l.drawImage(F,3*D.width/8,3*D.width/8,D.width/4|0,D.width/4|0));let r=i.toDataURL();(0,g.Z)(r).then(()=>Z("")).catch(()=>Z("可能无法识别该图片中的二维码内容"))}},[L]),(0,f.useEffect)(()=>{O()},[e]),(0,f.useEffect)(()=>{let t="text"===e?M:B,n=document.getElementById("qrcode");n&&t&&(p.toCanvas(n,t,D),q(n.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,D.width,D.width)))},[D,j,I,S,z,F,H]),(0,i.jsx)(r.Z,{children:(0,i.jsxs)(a.Z,{direction:"row",alignItems:"flex-start",spacing:2,children:[(0,i.jsxs)(a.Z,{direction:"column",spacing:2,sx:{width:"calc(100% - ".concat(D.width+48,"px)")},children:[(0,i.jsx)(l.Z,{value:e,list:m,change:e=>t(e)}),"text"===e&&(0,i.jsx)(s.Z,{children:(0,i.jsx)(d.Z,{sx:{width:"100%",height:"100%",fontFamily:"Mono",textarea:{height:"100% !important"}},value:M,rows:3,onChange:e=>_(e.target.value),margin:"dense",multiline:!0,autoFocus:!0})}),"url"===e&&(0,i.jsx)(s.Z,{children:(0,i.jsx)(c.Z,{sx:{width:"100%",input:{p:"6px 10px"},"input::placeholder":{fontSize:"14px"}},size:"small",placeholder:"请输入网址",variant:"outlined",value:B,onChange:e=>{let t=e.target.value;Z(""),/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(t)?Z(""):Z("请输入正确的网址"),P(t)}})}),(0,i.jsx)(u.Z,{variant:"contained",sx:{borderRadius:"4px"},onClick:()=>{"url"===e&&n||W(H+1),M||B||O()},children:"生成二维码"}),!!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{sx:{fontSize:"16px",fontWeight:600,mb:2},children:"Logo"}),(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,sx:{fontSize:"14px"},children:[(0,i.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"4px",width:"120px"},size:"small",onClick:()=>T("logoInput"),children:"上传 Logo"}),!!F&&(0,i.jsx)(s.Z,{sx:{color:"error.main",cursor:"pointer"},onClick:()=>{R(void 0)},children:"清除"})]}),(0,i.jsx)(s.Z,{sx:{fontSize:"16px",fontWeight:600,mb:2},children:"颜色"}),(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,sx:{fontSize:"14px"},children:[(0,i.jsx)(s.Z,{children:"背景色"}),(0,i.jsx)(c.Z,{sx:{width:"120px",input:{p:"6px 10px"},"input::placeholder":{fontSize:"14px"}},size:"small",type:"color",variant:"outlined",value:S,onChange:e=>{y(void 0),C(e.target.value)}}),(0,i.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"4px",width:"120px"},size:"small",onClick:()=>T("bgiInput"),children:j?"更换背景图":"上传背景图"}),(!!j||"#ffffff"!==S)&&(0,i.jsx)(s.Z,{sx:{color:"error.main",cursor:"pointer"},onClick:()=>{y(void 0),C("#ffffff")},children:"清除"})]}),(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,sx:{fontSize:"14px"},children:[(0,i.jsx)(s.Z,{children:"前景色"}),(0,i.jsx)(c.Z,{sx:{width:"120px",input:{p:"6px 10px"},"input::placeholder":{fontSize:"14px"}},size:"small",type:"color",variant:"outlined",value:z,onChange:e=>{E(void 0),k(e.target.value)}}),(0,i.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"4px",width:"120px"},size:"small",onClick:()=>T("fgiInput"),children:I?"更换前景图":"上传前景图"}),(!!I||"#000000"!==z)&&(0,i.jsx)(s.Z,{sx:{color:"error.main",cursor:"pointer"},onClick:()=>{E(void 0),k("#000000")},children:"清除"})]}),(0,i.jsx)(s.Z,{sx:{fontSize:"16px",fontWeight:600,mb:2},children:"其他"}),(0,i.jsxs)(a.Z,{spacing:2,sx:{fontSize:"14px"},children:[(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(s.Z,{children:"码边距"}),(0,i.jsx)(x.Z,{size:"small",displayEmpty:!0,sx:{width:"150px",height:"38px",fontSize:"14px"},value:D.margin.toString(),onChange:e=>{N({...D,margin:+e.target.value})},children:w.map(e=>(0,i.jsx)(h.Z,{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(s.Z,{children:"容错率"}),(0,i.jsx)(x.Z,{size:"small",displayEmpty:!0,sx:{width:"150px",height:"38px",fontSize:"14px"},value:D.errorCorrectionLevel,onChange:e=>{N({...D,errorCorrectionLevel:e.target.value})},children:b.map(e=>(0,i.jsx)(h.Z,{value:e.value,children:e.label},e.value))})]})]})]})]}),(0,i.jsxs)(s.Z,{sx:{width:D.width+32+"px",border:"1px solid rgba(0,0,0,0.2)",borderRadius:"4px",p:2},children:[(0,i.jsx)(s.Z,{sx:{borderRadius:"4px",boxShadow:"0 0 5px 2px rgba(0,0,0,0.05)",width:"400px",height:"400px"},children:(0,i.jsx)(s.Z,{component:"canvas",id:"qrcode",width:"400px",height:"400px"})}),n&&(0,i.jsx)(s.Z,{sx:{color:"error.main",fontSize:"12px",mt:2},children:n}),L?(0,i.jsxs)(a.Z,{direction:"column",spacing:2,sx:{mt:2},children:[(0,i.jsxs)(s.Z,{sx:{fontSize:"12px",color:"rgba(0,0,0,0.5)",textAlign:"center"},children:[v[D.errorCorrectionLevel],"容错"," ",D.width,"x",D.width,"px"]}),(0,i.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,i.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"4px",width:"100%"},onClick:A,children:"清除美化"}),(0,i.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"4px",width:"100%"},onClick:O,children:"清空内容"}),(0,i.jsx)(u.Z,{variant:"contained",sx:{borderRadius:"4px",width:"100%"},onClick:()=>{let e=document.getElementById("qrcode"),t=null==e?void 0:e.toDataURL(),n=document.createElement("a");n.href=t,n.download="qrcode.png",document.body.appendChild(n),n.click(),document.body.removeChild(n)},children:"下载图片"})]})]}):(0,i.jsx)(s.Z,{sx:{fontSize:"12px",mt:1,textAlign:"center",color:"rgba(0,0,0,0.5)"},children:"此处预览二维码"})]}),(0,i.jsx)(s.Z,{component:"input",id:"bgiInput",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>U(e,"bgimg")}),(0,i.jsx)(s.Z,{component:"input",id:"fgiInput",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>U(e,"fgimg")}),(0,i.jsx)(s.Z,{component:"input",id:"logoInput",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>U(e,"logoimg")})]})})}},51648:function(e,t,n){"use strict";function i(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[]}function l(e,t,n){let i=Math.max(e/=255,t/=255,n/=255),l=Math.min(e,t,n),r=i-l,o=0,a=0,s=(i+l)/2;if(0!==r){switch(a=s>.5?r/(2-i-l):r/(i+l),i){case e:o=(t-n)/r+(t<n?6:0);break;case t:o=(n-e)/r+2;break;case n:o=(e-t)/r+4}o*=60}return{h:o,s:a,l:s}}function r(e,t,n){let i=l(e,t,n),r=function(e,t,n){let i=Math.max(e,t,n),r=Math.min(e,t,n);return{h:l(e,t,n).h,w:1/255*r,b:1-i/255}}(e,t,n);return{rgb:"rgb(".concat(e,", ").concat(t,", ").concat(n,")"),hsl:"hsl(".concat(i.h.toFixed(2),", ").concat((100*i.s).toFixed(2),"%, ").concat((100*i.l).toFixed(2),"%)"),hwb:"hwb(".concat(r.h.toFixed(2),", ").concat((100*r.w).toFixed(2),"%, ").concat((100*r.b).toFixed(2),"%)"),hex:function(e,t,n){let i=e=>{let t=Math.round(Math.min(255,Math.max(0,e))).toString(16);return 1===t.length?"0"+t:t},l=i(e),r=i(t),o=i(n);return"#".concat(l).concat(r).concat(o)}(e,t,n)}}n.d(t,{S:function(){return r},o:function(){return i}})}},function(e){e.O(0,[6148,9912,1905,9774,2888,179],function(){return e(e.s=62099)}),_N_E=e.O()}]);