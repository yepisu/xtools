(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2584],{34570:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jsontocsv",function(){return n(65784)}])},31831:function(e,t,n){"use strict";var l=n(85893),i=n(67294),o=n(95982),r=n(13029),s=n(46901),a=n(20745),c=n(2734);let d=i.forwardRef(function(e,t){return(0,l.jsx)(s.Z,{elevation:6,ref:t,variant:"filled",...e})});function u(e){var t;let n=(0,c.Z)(),[s,a]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{setTimeout(()=>{a(!1)},2e3)},[]),(0,l.jsx)(r.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:s,sx:{zIndex:n.zIndex.snackbar+100},children:(0,l.jsx)(d,{sx:{borderRadius:"0","&.MuiAlert-filledSuccess":{backgroundColor:o.T$}},icon:!1,color:null==e?void 0:e.color,children:null!==(t=null==e?void 0:e.content)&&void 0!==t?t:""})},"top-center-warning")}function x(e){let t=document.createElement("div");document.body.appendChild(t),t.id="warning-window",t.style.zIndex="-2",(0,a.createRoot)(t).render((0,l.jsx)(u,{...e})),setTimeout(()=>{t.remove()},3e3)}t.Z={success:e=>x({color:"success",content:e}),warning:e=>x({color:"warning",content:e}),error:e=>x({color:"error",content:e})}},79163:function(e,t,n){"use strict";var l=n(85893),i=n(67294),o=n(11703),r=n(40044);t.Z=e=>{let{list:t,defatValue:n,onChange:s,change:a,sx:c,value:d}=e,[u,x]=(0,i.useState)(d||n||t[0].value);return(0,i.useEffect)(()=>{d&&x(d)},[d]),(0,l.jsx)(o.Z,{value:u,onChange:a?(e,t)=>a(t):(e,t)=>{null!==t&&(x(t),null==s||s(t))},sx:{p:"5px",border:"1px solid",borderColor:"divider",minHeight:36,height:36,backgroundColor:"background.paper",borderRadius:"4px",".MuiTabs-indicator":{top:0,bottom:0,height:"auto",borderRadius:"4px"},...c},children:t.map(e=>(0,l.jsx)(r.Z,{sx:{zIndex:1,p:"4px 12px",minHeight:0,width:"calc(100% / ".concat(t.length,")"),fontSize:"12px","&.Mui-selected":{color:"#fff"}},value:e.value,label:e.label,disabled:e.disabled},e.value))})}},43197:function(e,t,n){"use strict";var l=n(85893),i=n(70671),o=n(88613),r=n(47023),s=n(37375),a=n(55343),c=n(51233),d=n(5616),u=n(15861),x=n(25662),p=n(67294);t.Z=e=>{let{children:t,sx:n,fullScreen:h=!0}=e,{path:m}=(0,o.hI)(),[f]=p.useState(s.Z.find(e=>e.path===m));return(0,p.useEffect)(()=>{let e=e=>{if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="unset",e.style.inset="0",e.style.maxWidth="unset",e.style.padding="0",t&&(t.style.display="block"))}};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,l.jsxs)(c.Z,{sx:{px:"50px",py:2,overflow:"auto",flex:1,borderRadius:"8px",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(145,158,171,0.2), 0px 12px 24px -4px rgba(145,158,171,0.12)",...n},children:[(0,l.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(d.Z,{children:(0,l.jsx)(u.Z,{sx:{mb:"0px",fontWeight:600,color:i.Z2,fontSize:"20px"},gutterBottom:!0,variant:"subtitle1",component:"div",children:null==f?void 0:f.label})}),(0,l.jsx)(c.Z,{direction:"row",sx:{fontFamily:"Mono"},children:r.i.filter(e=>null==f?void 0:f.tags.includes(e.name)).map(e=>(0,l.jsx)(d.Z,{sx:{height:"24px",lineHeight:"24px",fontSize:"12px",background:"rgba(52,90,255,0.1)",color:"#345AFF",px:1,borderRadius:1,ml:1},children:e.label},e.name))})]}),(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",width:"100%",alignSelf:"stretch",mb:"24px"},children:[(0,l.jsx)(u.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",pl:"6px",color:"rgba(11,37,98,0.5)",background:"rgba(11,37,98,0.04)",borderRadius:1,lineHeight:"24px"},children:null==f?void 0:f.subTitle}),h?(0,l.jsx)(x.Z,{size:"small",onClick:()=>{let e=document.body;new Promise(t=>{(null==e?void 0:e.requestFullscreen)?t(e.requestFullscreen()):(null==e?void 0:e.mozRequestFullScreen)?t(null==e?void 0:e.mozRequestFullScreen()):(null==e?void 0:e.webkitRequestFullscreen)?t(null==e?void 0:e.webkitRequestFullscreen()):(null==e?void 0:e.msRequestFullscreen)&&t(null==e?void 0:e.msRequestFullscreen())}).then(()=>{let e=document.getElementById("fullscreen-element"),t=document.getElementById("rivers-header");e&&(e.style.position="fixed",e.style.inset="0",e.style.maxWidth="100vw",e.style.background="#fff",e.style.padding="84px 14px 14px 14px",t&&(t.style.display="none"))})},sx:{borderRadius:"4px",height:"24px"},variant:"outlined",startIcon:(0,l.jsx)(a.Z,{}),children:"全屏"}):null]}),(0,l.jsx)(c.Z,{id:"fullscreen-element",sx:{gap:"18px",maxWidth:"1020px",fontFamily:"Mono",mx:"auto",flex:1,width:"100%"},children:t})]})}},65784:function(e,t,n){"use strict";n.r(t);var l=n(85893),i=n(31831),o=n(79163),r=n(43197),s=n(88613),a=n(41899),c=n(51233),d=n(25662),u=n(67720),x=n(5616),p=n(61903),h=n(45843),m=n(17542),f=n(59268),b=n(67294),g=n(74981),y=n(74855);n(82679),n(90252),n(42270);let v=[{label:"EXCEL",value:2},{label:"CSV",value:1}];t.default=()=>{let[e,t,n,j]=(0,s.M$)([]),[w,Z]=(0,b.useState)(""),[S,k]=(0,b.useState)('[\n    {\n        "name": "张三",\n        "age": 18,\n        "skills": [\n            "running", "fishing"\n        ],\n        "other": {\n            "address": "浙江省杭州市",\n            "email": "xxx.xx@xx.com"\n        }\n    },\n    {\n        "name": "李四",\n        "age": 21,\n        "skills": [\n            "swimming", "skiing"\n        ],\n        "other": {\n            "address": "江苏省南京市",\n            "email": "yyy.yy@yy.com"\n        }\n    }\n]'),[C,E]=(0,b.useState)(2),[z,R]=(0,b.useState)(""),[F,I]=(0,b.useState)(""),[O,L]=(0,b.useState)(!0),[M,_]=(0,b.useState)({field:","}),N=(0,b.useCallback)(()=>{i.Z.success("复制成功")},[]),T=e=>{R((0,m.cN)(e,{expandNestedObjects:O,delimiter:M,excludeKeys:F.replace(/\s/g,"").split(",")}))},A=e=>e.map(e=>{let t={};for(let n in e)"object"==typeof e[n]||"boolean"==typeof e[n]?t[n]=JSON.stringify(e[n]):t[n]=e[n];return F.split(",").forEach(e=>{e&&delete t[e]}),t}),B=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],"[object Object]"===Object.prototype.toString.call(e)){let t={};return Object.keys(e).map(n=>{let l=B(e[n],n);if("[object Object]"!==Object.prototype.toString.call(e[n])||"object"!=typeof l||Array.isArray(l))t={...t,[n]:l};else{let e={};Object.keys(l).map(t=>{e["".concat(n,".").concat(t)]=l[t]}),t={...t,...e}}}),t}return"object"==typeof e||"boolean"==typeof e?JSON.stringify(e):e},q=e=>e.map(e=>{let t=B(e);return F.split(",").forEach(e=>{e&&delete t[e]}),t});return(0,b.useEffect)(()=>{if(""===S){n([]),R(""),Z("");return}try{let e=JSON.parse(S||""),t=Array.isArray(e)?e:[e],l=O?q(t):A(t);n(l),T(t),Z("")}catch(e){n([]),R(""),Z("非 JSON 格式，无法转换为 "+(1===C?"CSV":"EXCEL"))}},[S,O,M,F]),(0,l.jsx)(r.Z,{children:(0,l.jsxs)(c.Z,{sx:{mt:"24px",gap:"18px",fontFamily:"Mono",".rc-table":{border:"1px solid #eee",borderRadius:"4px"},".rc-table table":{width:"100%",borderCollapse:"collapse"},".rc-table-thead .rc-table-cell":{textAlign:"left",paddingLeft:"24px",backgroundColor:"#eee",fontSize:"12px",height:"28px",fontWeight:500,fontFamily:"Mono"},".rc-table-tbody .rc-table-row":{borderBottom:"1px solid #eee"},".rc-table-tbody .rc-table-cell":{paddingLeft:0===e.length?"0":"24px",fontSize:"14px",paddingTop:"12px",paddingBottom:"12px",fontFamily:"Mono"},"#ace-editor *":{fontFamily:"Mono"}},children:[(0,l.jsx)(g.ZP,{name:"ace-editor",fontSize:16,style:{width:"100%",borderRadius:"4px",height:"470px"},value:S,mode:"json",theme:"monokai",onChange:k,editorProps:{$blockScrolling:!0}}),(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(o.Z,{list:v,value:C,size:"small",change:e=>E(e)}),(0,l.jsx)(d.Z,{sx:{borderRadius:"4px"},size:"small",variant:"outlined",onClick:()=>{let e=document.getElementById("fileInput");null==e||e.click()},children:"上传 JSON 文件"})]}),(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:2,divider:(0,l.jsx)(u.Z,{orientation:"vertical",flexItem:!0}),children:[(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",children:[(0,l.jsx)(x.Z,{sx:{color:"#999",fontSize:"14px"},children:"排除键："}),(0,l.jsx)(p.Z,{sx:{width:"230px",input:{p:"6px 10px"},"input::placeholder":{fontSize:"14px"}},size:"small",placeholder:"英文逗号隔开：key1,key2",variant:"outlined",value:F,onChange:e=>I(e.target.value)})]}),(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",children:[(0,l.jsx)(x.Z,{sx:{color:"#999",fontSize:"14px"},children:"深度递归："}),(0,l.jsx)(h.Z,{checked:O,onChange:e=>L(e.target.checked)})]}),1===C&&(0,l.jsxs)(c.Z,{direction:"row",alignItems:"center",children:[(0,l.jsx)(x.Z,{sx:{color:"#999",fontSize:"14px"},children:"分隔符："}),(0,l.jsx)(p.Z,{sx:{width:"100px",input:{p:"6px 10px"}},size:"small",variant:"outlined",value:M.field,onChange:e=>{_({...M,field:e.target.value})}})]})]}),2===C?(0,l.jsx)(d.Z,{variant:"contained",size:"small",sx:{borderRadius:"4px"},disabled:!!w||!S,onClick:j,children:"导出表格"}):(0,l.jsxs)(d.Z,{variant:"contained",size:"small",sx:{borderRadius:"4px"},disabled:!!w||!S,onClick:()=>{let e=new Blob([z],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download="jsontocsv",document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:["导出 CSV"," "]})]}),1===C&&(0,l.jsxs)(x.Z,{sx:{position:"relative"},children:[(0,l.jsx)(x.Z,{sx:{width:"100%",fontFamily:"Mono",textarea:{paddingRight:"35px"},borderRadius:"4px",border:"1px solid #eee",p:2},children:w&&""!==S?(0,l.jsx)(x.Z,{sx:{color:"error.main",fontSize:"12px"},children:w}):(0,l.jsx)(x.Z,{sx:{fontFamily:"Mono",width:"calc(100% - 32px)",overflow:"scroll",whiteSpace:"pre"},children:z})}),(0,l.jsx)(y.CopyToClipboard,{text:z,onCopy:N,children:(0,l.jsx)(a.Z,{sx:{zIndex:1,position:"absolute",right:"12px",top:"14px",cursor:"pointer","& svg":{width:"20px",height:"20px"}},fontSize:"small",color:"primary"})})]}),2===C&&(0,l.jsx)(f.ZP,{columns:e.length>0?Object.keys(e[0]).map((e,n)=>({title:e,dataIndex:e,key:e,width:t[n]})):[],data:e,rowKey:"key",scroll:0===e.length?{}:{x:t.reduce((e,t)=>e+t,0)},emptyText:(0,l.jsx)(x.Z,{sx:{textAlign:"center",color:w?"red":"#999",fontSize:"12px"},children:w||"暂无数据"})}),(0,l.jsx)(x.Z,{component:"input",id:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:e=>{let t=e.target.files[0];if(t){if("application/json"===t.type){let e=new FileReader;e.onload=e=>{k(e.target.result),Z("")},e.readAsText(t)}else k(""),Z("Invalid file type.")}}})]})})}}},function(e){e.O(0,[4281,4757,9912,9268,36,9774,2888,179],function(){return e(e.s=34570)}),_N_E=e.O()}]);