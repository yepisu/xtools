"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9703],{77137:function(e,t,r){var a,i;let n;r.d(t,{C:function(){return d}}),(i=a||(a={})).LOAD="LOAD",i.EXEC="EXEC",i.WRITE_FILE="WRITE_FILE",i.READ_FILE="READ_FILE",i.DELETE_FILE="DELETE_FILE",i.RENAME="RENAME",i.CREATE_DIR="CREATE_DIR",i.LIST_DIR="LIST_DIR",i.DELETE_DIR="DELETE_DIR",i.ERROR="ERROR",i.DOWNLOAD="DOWNLOAD",i.PROGRESS="PROGRESS",i.LOG="LOG";let o=(n=0,()=>n++);Error("unknown message type");let l=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),s=Error("called FFmpeg.terminate()");Error("failed to import ffmpeg-core.js");class d{#e=null;#t={};#r={};#a=[];#i=[];loaded=!1;#n=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:r}})=>{switch(t){case a.LOAD:this.loaded=!0,this.#t[e](r);break;case a.EXEC:case a.WRITE_FILE:case a.READ_FILE:case a.DELETE_FILE:case a.RENAME:case a.CREATE_DIR:case a.LIST_DIR:case a.DELETE_DIR:this.#t[e](r);break;case a.LOG:this.#a.forEach(e=>e(r));break;case a.PROGRESS:this.#i.forEach(e=>e(r));break;case a.ERROR:this.#r[e](r)}delete this.#t[e],delete this.#r[e]})};#o=({type:e,data:t},r=[])=>this.#e?new Promise((a,i)=>{let n=o();this.#e&&this.#e.postMessage({id:n,type:e,data:t},r),this.#t[n]=a,this.#r[n]=i}):Promise.reject(l);on(e,t){"log"===e?this.#a.push(t):"progress"===e&&this.#i.push(t)}off(e,t){"log"===e?this.#a=this.#a.filter(e=>e!==t):"progress"===e&&(this.#i=this.#i.filter(e=>e!==t))}load=(e={})=>(this.#e||(this.#e=new Worker(r.tu(new URL(r.p+r.u(1480),r.b)),{type:void 0}),this.#n()),this.#o({type:a.LOAD,data:e}));exec=(e,t=-1)=>this.#o({type:a.EXEC,data:{args:e,timeout:t}});terminate=()=>{for(let e of Object.keys(this.#r))this.#r[e](s),delete this.#r[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t)=>{let r=[];return t instanceof Uint8Array&&r.push(t.buffer),this.#o({type:a.WRITE_FILE,data:{path:e,data:t}},r)};readFile=(e,t="binary")=>this.#o({type:a.READ_FILE,data:{path:e,encoding:t}});deleteFile=e=>this.#o({type:a.DELETE_FILE,data:{path:e}});rename=(e,t)=>this.#o({type:a.RENAME,data:{oldPath:e,newPath:t}});createDir=e=>this.#o({type:a.CREATE_DIR,data:{path:e}});listDir=e=>this.#o({type:a.LIST_DIR,data:{path:e}});deleteDir=e=>this.#o({type:a.DELETE_DIR,data:{path:e}})}},11814:function(e,t,r){r.d(t,{dc:function(){return o},Wn:function(){return s}});let a=Error("failed to get response body reader"),i=Error("failed to complete download"),n=e=>new Promise((t,r)=>{let a=new FileReader;a.onload=()=>{let{result:e}=a;e instanceof ArrayBuffer?t(new Uint8Array(e)):t(new Uint8Array)},a.onerror=e=>{r(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},a.readAsArrayBuffer(e)}),o=async e=>{let t;if("string"==typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0)):await (await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await (await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await n(e)}return new Uint8Array(t)},l=async(e,t)=>{let r;let n=await fetch(e);try{let o=parseInt(n.headers.get("Content-Length")||"-1"),l=n.body?.getReader();if(!l)throw a;let s=[],d=0;for(;;){let{done:r,value:a}=await l.read(),n=a?a.length:0;if(r){if(-1!=o&&o!==d)throw i;t&&t({url:e,total:o,received:d,delta:n,done:r});break}s.push(a),d+=n,t&&t({url:e,total:o,received:d,delta:n,done:r})}let c=new Uint8Array(d),u=0;for(let e of s)c.set(e,u),u+=e.length;r=c.buffer}catch(a){console.log("failed to send download progress event: ",a),r=await n.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},s=async(e,t,r=!1,a)=>{let i=r?await l(e,a):await (await fetch(e)).arrayBuffer(),n=new Blob([i],{type:t});return URL.createObjectURL(n)}},35097:function(e,t,r){r.d(t,{V:function(){return n}});var a=r(1588),i=r(34867);function n(e){return(0,i.Z)("MuiDivider",e)}let o=(0,a.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},23599:function(e,t,r){r.d(t,{Z:function(){return I}});var a=r(63366),i=r(87462),n=r(67294),o=r(90512),l=r(94780),s=r(41796),d=r(90948),c=r(71657),u=r(59773),p=r(49990),f=r(58974),h=r(51705),m=r(35097),g=r(1588);let v=(0,g.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),x=(0,g.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var b=r(34867);function y(e){return(0,b.Z)("MuiMenuItem",e)}let E=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var w=r(85893);let R=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],L=e=>{let{disabled:t,dense:r,divider:a,disableGutters:n,selected:o,classes:s}=e,d=(0,l.Z)({root:["root",r&&"dense",t&&"disabled",!n&&"gutters",a&&"divider",o&&"selected"]},y,s);return(0,i.Z)({},s,d)},Z=(0,d.ZP)(p.Z,{shouldForwardProp:e=>(0,d.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${E.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${E.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${E.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${E.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${E.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${m.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${m.Z.inset}`]:{marginLeft:52},[`& .${x.root}`]:{marginTop:0,marginBottom:0},[`& .${x.inset}`]:{paddingLeft:36},[`& .${v.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${v.root} svg`]:{fontSize:"1.25rem"}})));var I=n.forwardRef(function(e,t){let r;let l=(0,c.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:d="li",dense:p=!1,divider:m=!1,disableGutters:g=!1,focusVisibleClassName:v,role:x="menuitem",tabIndex:b,className:y}=l,E=(0,a.Z)(l,R),I=n.useContext(u.Z),C=n.useMemo(()=>({dense:p||I.dense||!1,disableGutters:g}),[I.dense,p,g]),k=n.useRef(null);(0,f.Z)(()=>{s&&k.current&&k.current.focus()},[s]);let j=(0,i.Z)({},l,{dense:C.dense,divider:m,disableGutters:g}),D=L(l),T=(0,h.Z)(k,t);return l.disabled||(r=void 0!==b?b:-1),(0,w.jsx)(u.Z.Provider,{value:C,children:(0,w.jsx)(Z,(0,i.Z)({ref:T,role:x,tabIndex:r,component:d,focusVisibleClassName:(0,o.Z)(D.focusVisible,v),className:(0,o.Z)(D.root,y)},E,{ownerState:j,classes:D}))})})},31831:function(e,t,r){var a=r(85893),i=r(67294),n=r(95982),o=r(13029),l=r(46901),s=r(20745),d=r(2734);let c=i.forwardRef(function(e,t){return(0,a.jsx)(l.Z,{elevation:6,ref:t,variant:"filled",...e})});function u(e){var t;let r=(0,d.Z)(),[l,s]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{setTimeout(()=>{s(!1)},2e3)},[]),(0,a.jsx)(o.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l,sx:{zIndex:r.zIndex.snackbar+100},children:(0,a.jsx)(c,{sx:{borderRadius:"0","&.MuiAlert-filledSuccess":{backgroundColor:n.T$}},icon:!1,color:null==e?void 0:e.color,children:null!==(t=null==e?void 0:e.content)&&void 0!==t?t:""})},"top-center-warning")}function p(e){let t=document.createElement("div");document.body.appendChild(t),t.id="warning-window",t.style.zIndex="-2",(0,s.createRoot)(t).render((0,a.jsx)(u,{...e})),setTimeout(()=>{t.remove()},3e3)}t.Z={success:e=>p({color:"success",content:e}),warning:e=>p({color:"warning",content:e}),error:e=>p({color:"error",content:e})}},49703:function(e,t,r){r.r(t);var a=r(85893),i=r(31831),n=r(77137),o=r(11814),l=r(5616),s=r(73575),d=r(23599),c=r(51233),u=r(25662),p=r(59268),f=r(67294);let h=[{label:"AAC",value:"audio/aac",suffix:"aac"},{label:"OGA",value:"audio/ogg",suffix:"oga"},{label:"WAV",value:"audio/wav",suffix:"wav"},{label:"MP3",value:"audio/mpeg",suffix:"mp3"}];t.default=()=>{let[e,t]=(0,f.useState)([]),[r,m]=(0,f.useState)(!1),[g,v]=(0,f.useState)(""),x=(0,f.useRef)(new n.C),b=(0,f.useRef)(null),y=(0,f.useRef)(null),E=async(e,t)=>{try{var r;let a=x.current,i=e.name.split(".")[0]+"."+(null===(r=h.find(e=>e.value===t))||void 0===r?void 0:r.suffix);await a.writeFile(e.name,await (0,o.dc)(e)),b.current&&(b.current.innerHTML="".concat(b.current.innerHTML,"<div>").concat(e.name," ===> ").concat(i,"</div>")),await a.exec(["-i",e.name,i]);let n=await a.readFile(i),l=URL.createObjectURL(new Blob([n],{type:t}));return a.deleteFile(e.name),a.deleteFile(i),b.current&&(b.current.innerHTML="".concat(b.current.innerHTML,'<div style="color: green">Successful conversion</div>')),l}catch(e){return b.current&&(b.current.innerHTML="".concat(b.current.innerHTML,'<div style="color: red">').concat(e,"</div>")),Promise.reject(e)}finally{y.current&&(y.current.innerHTML=""),m(!1)}},w=e=>{if(0===e)return"0 B";{let t=Math.floor(Math.log10(e)/Math.log10(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}},R=(r,a)=>{v(""),t(e.map(e=>e.id===a?{...e,url:"",loading:!1,conversion:r}:e))},L=[{title:"文件名",dataIndex:"file",key:"file",render:e=>(0,a.jsx)(l.Z,{children:e.name})},{title:"音频大小",dataIndex:"size",key:"size",width:150,render:e=>(0,a.jsx)(l.Z,{children:w(e)})},{title:"转换",dataIndex:"conversion",key:"conversion",width:200,render:(e,t)=>(0,a.jsx)(l.Z,{children:(0,a.jsx)(s.Z,{size:"small",displayEmpty:!0,sx:{width:"150px",height:"30px",fontSize:"14px"},value:e,MenuProps:{sx:{maxHeight:"500px"}},renderValue:e=>{var t;return e?null===(t=h.filter(t=>t.value===e)[0])||void 0===t?void 0:t.label:(0,a.jsx)(l.Z,{sx:{color:"#999"},children:"选择转换类型"})},onChange:e=>{r?i.Z.warning("等待转换完成"):R(e.target.value,t.id)},children:h.map(e=>(0,a.jsx)(d.Z,{value:e.value,children:e.label},e.value))})})},{title:"操作",dataIndex:"setting",key:"setting",width:150,render:(n,o)=>(0,a.jsxs)(c.Z,{direction:"row",children:[(0,a.jsx)(u.Z,{size:"small",color:"primary",sx:{borderRadius:"4px",minWidth:"auto"},disabled:r||o.loading||!o.conversion,onClick:()=>I(o),children:"转换"}),(0,a.jsx)(u.Z,{size:"small",color:"primary",disabled:r||o.loading||!o.url,sx:{borderRadius:"4px",minWidth:"auto"},onClick:()=>Z(o.url,o.file.name.split(".")[0]+"."+h.find(e=>e.value===o.conversion).suffix),children:"下载"}),(0,a.jsx)(u.Z,{size:"small",color:"error",disabled:r||o.loading,sx:{borderRadius:"4px",minWidth:"auto"},onClick:()=>{t(e.filter(e=>e.id!==o.id)),i.Z.success("移除成功")},children:"移除"})]})}],Z=(e,t)=>{let r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},I=async r=>{if(r.url)return;m(!0);let a=await E(r.file,r.conversion);t(e.map(e=>e.id===r.id?{...e,url:a,loading:!1}:e))},C=async()=>{let e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd",t=x.current;t.on("log",e=>{let{message:t}=e;y.current&&(y.current.innerHTML=t)}),await t.load({coreURL:await (0,o.Wn)("".concat(e,"/ffmpeg-core.js"),"text/javascript"),wasmURL:await (0,o.Wn)("".concat(e,"/ffmpeg-core.wasm"),"application/wasm")})};return(0,f.useEffect)(()=>{C()},[]),(0,a.jsxs)(c.Z,{spacing:2,sx:{".rc-table":{border:"1px solid #eee",borderRadius:"4px"},".rc-table table":{width:"100%",borderCollapse:"collapse"},".rc-table-thead .rc-table-cell":{textAlign:"left",paddingLeft:"24px",backgroundColor:"#eee",fontSize:"12px",height:"28px",fontWeight:500,fontFamily:"Mono"},".rc-table-tbody .rc-table-row":{borderBottom:"1px solid #eee"},".rc-table-tbody .rc-table-cell":{paddingLeft:"24px",fontSize:"14px",paddingTop:"12px",paddingBottom:"12px",fontFamily:"Mono"}},children:[(0,a.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[(0,a.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(u.Z,{sx:{borderRadius:"4px"},size:"small",variant:"outlined",onClick:()=>{let e=document.getElementById("fileInput");null==e||e.click()},children:"上传音频"}),(0,a.jsxs)(l.Z,{sx:{color:"#999",fontSize:"12px"},children:["已上传 ",e.length," 个音频"]})]}),(0,a.jsx)(s.Z,{size:"small",displayEmpty:!0,sx:{width:"150px",height:"30px",fontSize:"14px"},value:g,MenuProps:{sx:{maxHeight:"500px"}},renderValue:e=>{var t;return e?null===(t=h.filter(t=>t.value===e)[0])||void 0===t?void 0:t.label:(0,a.jsx)(l.Z,{sx:{color:"#999"},children:"全部切换类型"})},onChange:a=>{r?i.Z.warning("等待转换完成"):(v(a.target.value),t(e.map(e=>({...e,loading:!1,url:"",conversion:a.target.value}))))},children:h.map(e=>(0,a.jsx)(d.Z,{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)(l.Z,{component:"input",id:"fileInput",multiple:!0,type:"file",accept:"audio/*",style:{display:"none"},onChange:r=>{t([...e,...[...r.target.files].map(e=>({id:1e9*Math.random()|0,file:e,type:e.type,size:e.size,conversion:"",url:"",loading:!1}))])}}),(0,a.jsx)(p.ZP,{columns:L,data:e,rowKey:"id",emptyText:(0,a.jsx)(l.Z,{sx:{textAlign:"center",color:"#999",fontSize:"12px"},children:"暂无数据"})}),(0,a.jsxs)(l.Z,{sx:{fontSize:"12px",bgcolor:"rgba(0,0,0,0.05)",py:1,px:2,color:"#999",borderRadius:"4px"},children:[(0,a.jsx)(l.Z,{ref:b}),(0,a.jsx)(l.Z,{ref:y,children:"Upload audio and convert audio format"})]})]})}}}]);